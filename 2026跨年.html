<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>Ê¥æÊ£ÆÂ∞èËçâ:2026Ë∑®Âπ¥</title>
    <style>
        body, html {
            margin: 0; padding: 0; overflow: hidden;
            background: #000; color: #fff;
            width: 100%; height: 100%;
            display: flex; flex-direction: column;
            justify-content: center; align-items: center;
            font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif;
        }

        body::before {
            content: ''; position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: radial-gradient(circle at 50% 50%, rgba(20, 20, 40, 1) 0%, #000 100%);
            z-index: -1;
        }

        #user-logo {
            position: absolute; top: 30px; right: 30px;
            width: 100px; height: auto; z-index: 100;
            opacity: 0.8; filter: drop-shadow(0 0 8px rgba(255,255,255,0.3));
        }

        /* Èü≥‰πêÊéßÂà∂Èù¢ÊùøÊ†∑Âºè */
        .music-controls {
            position: absolute;
            top: 30px;
            left: 30px;
            display: flex;
            align-items: center;
            gap: 15px;
            z-index: 100;
            background: rgba(0, 0, 0, 0.7);
            padding: 10px 15px;
            border-radius: 30px;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .music-btn {
            background: transparent;
            border: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.1);
        }

        .music-btn:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: scale(1.1);
        }

        .volume-slider {
            width: 100px;
            height: 4px;
            -webkit-appearance: none;
            appearance: none;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 2px;
            outline: none;
        }

        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #4dffff;
            cursor: pointer;
            box-shadow: 0 0 8px rgba(77, 255, 255, 0.5);
        }

        .volume-slider::-moz-range-thumb {
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #4dffff;
            cursor: pointer;
            border: none;
        }

        .music-info {
            font-size: 12px;
            color: rgba(255, 255, 255, 0.7);
            min-width: 100px;
            text-align: center;
        }

        .title {
            font-size: 48px; margin-bottom: 40px;
            background: linear-gradient(90deg, #ff0000, #ff9900, #ffff00, #00ff00, #00ffff, #0000ff, #9900ff);
            -webkit-background-clip: text; background-clip: text; color: transparent;
            animation: titleGlow 3s infinite alternate;
            letter-spacing: 4px; font-weight: bold; z-index: 5;
        }

        .greeting-box {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 10px 30px;
            border-radius: 50px;
            margin-bottom: 25px;
            backdrop-filter: blur(5px);
            z-index: 5;
            animation: softPulse 2s infinite alternate;
        }

        .greeting-text {
            font-size: 30px;
            letter-spacing: 3px;
            color: rgba(255, 255, 255, 0.85);
            text-shadow: 0 0 10px rgba(255, 255, 255, 0.3);
        }

        #led-display {
            display: flex; flex-direction: row;
            align-items: center; justify-content: center;
            gap: 12px; margin-bottom: 40px;
            padding: 35px; background: rgba(255, 255, 255, 0.03);
            border-radius: 25px; position: relative;
            box-shadow: 0 0 50px rgba(0,0,0,0.5); z-index: 5;
        }

        .char-box { 
            display: flex; flex-direction: column;
            align-items: center; gap: 5px; 
            animation: boxFloat 4s infinite ease-in-out;
        }
        
        .led {
            width: 14px; height: 14px; 
            background: #111; border-radius: 2px;
            transition: background 0.4s ease;
        }

        .led.on {
            animation: rainbowGlow 2s infinite linear;
        }

        .led-particle {
            position: absolute; width: 5px; height: 5px; border-radius: 1px;
            pointer-events: none; z-index: 2;
        }

        .clock-box {
            background: #0a0a0a; padding: 25px 60px;
            border-radius: 20px; border: 1px solid #333;
            text-align: center; z-index: 5;
            position: relative;
            min-height: 180px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #timer { 
            font-size: 80px; font-family: 'Courier New', monospace; 
            font-weight: bold; color: #fff;
            text-shadow: 0 0 20px rgba(255,255,255,0.5);
            transition: opacity 0.8s ease;
        }

        #python-display {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            display: flex; 
            flex-direction: row;
            align-items: center;
            justify-content: center;
            gap: 12px;
            opacity: 0;
            transition: opacity 0.8s ease;
        }

        .python-char-box { 
            display: flex; flex-direction: column;
            align-items: center; gap: 5px; 
        }
        
        .python-led {
            width: 12px; height: 12px; 
            background: #111; border-radius: 2px;
            transition: background 0.4s ease;
        }

        .python-led.on {
            animation: rainbowGlow 2s infinite linear;
        }

        @keyframes rainbowGlow {
            0% { background: #ff0000; box-shadow: 0 0 12px #ff0000; }
            33% { background: #00ff00; box-shadow: 0 0 12px #00ff00; }
            66% { background: #00ffff; box-shadow: 0 0 12px #00ffff; }
            100% { background: #ff0000; box-shadow: 0 0 12px #ff0000; }
        }

        @keyframes softPulse {
            0% { transform: scale(1); opacity: 0.8; }
            100% { transform: scale(1.02); opacity: 1; }
        }

        @keyframes boxFloat { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
        @keyframes titleGlow { 0% { filter: hue-rotate(0deg); } 100% { filter: hue-rotate(360deg); } }
        
        /* Èü≥‰πêÈ¢ëË∞±ÂèØËßÜÂåñ */
        .music-visualizer {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            align-items: flex-end;
            gap: 3px;
            height: 60px;
            z-index: 5;
        }

        .music-bar {
            width: 4px;
            background: linear-gradient(to top, #ff4d4d, #4dffff);
            border-radius: 2px;
            transition: height 0.1s ease;
        }
    </style>
</head>
<body>

    <img id="user-logo" src="xiaocao.png" alt="LOGO" onerror="console.log('ÂõæÁâáÂä†ËΩΩÂ§±Ë¥•ÔºåËØ∑Ê£ÄÊü•Ë∑ØÂæÑ')">
    
    <!-- Èü≥‰πêÊéßÂà∂Èù¢Êùø -->
    <div class="music-controls">
        <button id="playPauseBtn" class="music-btn">‚ñ∂Ô∏è</button>
        <input type="range" id="volumeSlider" class="volume-slider" min="0" max="100" value="50">
        <div id="musicInfo" class="music-info">ÁÇπÂáªÊí≠ÊîæÈü≥‰πê</div>
    </div>
    
    <!-- Èü≥‰πêÈ¢ëË∞±ÂèØËßÜÂåñ -->
    <div class="music-visualizer" id="visualizer"></div>

    <div class="title" id="main-title">‚ú® ÊÑüË∞¢2025(^-^) ‚ú®</div>

    <div class="greeting-box" id="greeting-container">
        <div class="greeting-text" id="greeting-msg">ÁÇπËµû„ÄÅÊî∂Ëóè„ÄÅÂÖ≥Ê≥®„ÄÅÈºìÂä±ÁöÑÊúãÂèã‰ª¨ÔΩû</div>
    </div>
    
    <div id="led-display"></div>

    <div class="clock-box">
        <div id="timer">00:09</div>
        <div id="python-display"></div>
    </div>
    
    <!-- Èü≥È¢ëÂÖÉÁ¥† -->
    <audio id="bgMusic" loop>
        <!-- ÈªòËÆ§Èü≥‰πêÔºàÂèØ‰ª•‰ΩøÁî®Âú®Á∫øÈü≥‰πêÈìæÊé•Ôºâ -->
        <!-- Â¶ÇÊûúÊ≤°ÊúâÈü≥‰πêÊñá‰ª∂ÔºåÊµèËßàÂô®‰ºöÈùôÈü≥Êí≠ÊîæÔºå‰ΩÜÊéßÂà∂Èù¢Êùø‰ªç‰ºöÂ∑•‰Ωú -->

        <source src="sense.ogg" type="audio/ogg">
        <!-- Â§áÁî®Èü≥‰πêÊ∫ê -->
        
    </audio>

<script>
// Èü≥‰πêÊéßÂà∂
const bgMusic = document.getElementById('bgMusic');
const playPauseBtn = document.getElementById('playPauseBtn');
const volumeSlider = document.getElementById('volumeSlider');
const musicInfo = document.getElementById('musicInfo');
const visualizer = document.getElementById('visualizer');

// ÂàùÂßãÂåñÈü≥È¢ë‰∏ä‰∏ãÊñáÔºàÁî®‰∫éÈ¢ëË∞±ÂèØËßÜÂåñÔºâ
let audioContext;
let analyser;
let dataArray;
let bufferLength;
let bars = [];

// ÂàõÂª∫È¢ëË∞±ÂèØËßÜÂåñÊù°
for (let i = 0; i < 32; i++) {
    const bar = document.createElement('div');
    bar.className = 'music-bar';
    bar.style.height = '5px';
    visualizer.appendChild(bar);
    bars.push(bar);
}

// Êí≠Êîæ/ÊöÇÂÅúÂäüËÉΩ
playPauseBtn.addEventListener('click', () => {
    if (bgMusic.paused) {
        playMusic();
    } else {
        pauseMusic();
    }
});

// Èü≥ÈáèÊéßÂà∂
volumeSlider.addEventListener('input', (e) => {
    const volume = e.target.value / 100;
    bgMusic.volume = volume;
    musicInfo.textContent = `Èü≥Èáè: ${e.target.value}%`;
    
    // ‰øùÂ≠òÈü≥ÈáèËÆæÁΩÆ
    localStorage.setItem('newYearMusicVolume', e.target.value);
});

// ÂàùÂßãÂåñÈü≥Èáè
const savedVolume = localStorage.getItem('newYearMusicVolume');
if (savedVolume) {
    volumeSlider.value = savedVolume;
    bgMusic.volume = savedVolume / 100;
    musicInfo.textContent = `Èü≥Èáè: ${savedVolume}%`;
}

function playMusic() {
    // Â∞ùËØïÊí≠ÊîæÈü≥‰πê
    const playPromise = bgMusic.play();
    
    if (playPromise !== undefined) {
        playPromise.then(() => {
            // Êí≠ÊîæÊàêÂäü
            playPauseBtn.textContent = '‚è∏Ô∏è';
            musicInfo.textContent = 'Êí≠Êîæ‰∏≠...';
            
            // ÂàùÂßãÂåñÈü≥È¢ëÂàÜÊûêÔºàÁî®‰∫éÂèØËßÜÂåñÔºâ
            initAudioAnalyser();
            
            // ÂºÄÂßãÂèØËßÜÂåñÂä®Áîª
            animateVisualizer();
            
        }).catch(error => {
            // Êí≠ÊîæÂ§±Ë¥•ÔºàÈÄöÂ∏∏ÊòØÁî®Êà∑Êú™‰∫§‰∫íÔºâ
            console.log('Ëá™Âä®Êí≠ÊîæË¢´ÈòªÊ≠¢ÔºåËØ∑ÁÇπÂáªÊí≠ÊîæÊåâÈíÆ');
            playPauseBtn.textContent = '‚ñ∂Ô∏è';
            musicInfo.textContent = 'ÁÇπÂáªÊí≠Êîæ';
            
            // ÊòæÁ§∫ÊèêÁ§∫
            musicInfo.textContent = 'ÁÇπÂáªÊí≠ÊîæÊåâÈíÆÂºÄÂêØÈü≥‰πê';
            
            // ËÆæÁΩÆÁÇπÂáª‰∫ã‰ª∂ÂÜçÊ¨°Â∞ùËØï
            playPauseBtn.onclick = () => {
                bgMusic.play().then(() => {
                    playPauseBtn.textContent = '‚è∏Ô∏è';
                    musicInfo.textContent = 'Êí≠Êîæ‰∏≠...';
                    initAudioAnalyser();
                    animateVisualizer();
                });
            };
        });
    }
}

function pauseMusic() {
    bgMusic.pause();
    playPauseBtn.textContent = '‚ñ∂Ô∏è';
    musicInfo.textContent = 'Â∑≤ÊöÇÂÅú';
    
    // ÂÅúÊ≠¢ÂèØËßÜÂåñ
    if (visualizer) {
        bars.forEach(bar => {
            bar.style.height = '5px';
        });
    }
}

// ÂàùÂßãÂåñÈü≥È¢ëÂàÜÊûêÂô®
function initAudioAnalyser() {
    if (!audioContext) {
        audioContext = new (window.AudioContext || window.webkitAudioContext)();
        analyser = audioContext.createAnalyser();
        const source = audioContext.createMediaElementSource(bgMusic);
        source.connect(analyser);
        analyser.connect(audioContext.destination);
        analyser.fftSize = 64;
        
        bufferLength = analyser.frequencyBinCount;
        dataArray = new Uint8Array(bufferLength);
    }
}

// Âä®ÁîªÈ¢ëË∞±ÂèØËßÜÂåñ
function animateVisualizer() {
    if (!analyser) return;
    
    analyser.getByteFrequencyData(dataArray);
    
    // Êõ¥Êñ∞ÂèØËßÜÂåñÊù°
    for (let i = 0; i < bars.length; i++) {
        const value = dataArray[i] || 0;
        const height = Math.max(5, (value / 255) * 60);
        bars[i].style.height = `${height}px`;
        
        // Ê†πÊçÆÈ¢ëÁéáÊîπÂèòÈ¢úËâ≤
        const hue = (i * 10 + Date.now() / 50) % 360;
        bars[i].style.background = `linear-gradient(to top, hsl(${hue}, 100%, 50%), hsl(${(hue + 60) % 360}, 100%, 70%))`;
    }
    
    requestAnimationFrame(animateVisualizer);
}

// Ëá™Âä®Êí≠ÊîæÔºàÂú®Áî®Êà∑‰∫§‰∫íÂêéÔºâ
document.addEventListener('click', function initAudio() {
    // Á°Æ‰øùÈ°µÈù¢Ëá≥Â∞ëË¢´ÁÇπÂáªËøá‰∏ÄÊ¨°
    document.removeEventListener('click', initAudio);
    
    // Ê£ÄÊü•ÊòØÂê¶Â∑≤ÁªèÊí≠ÊîæÔºåÂ¶ÇÊûúÊ≤°ÊúâÂàôÊí≠Êîæ
    if (bgMusic.paused) {
        playMusic();
    }
    
    // ÊøÄÊ¥ª AudioContext
    if (audioContext && audioContext.state === 'suspended') {
        audioContext.resume();
    }
});

// ‰πüÂèØ‰ª•‰∏∫Êï¥‰∏™È°µÈù¢Ê∑ªÂä†ÁÇπÂáªÁõëÂê¨
document.body.addEventListener('click', function() {
    if (bgMusic.paused) {
        playMusic();
    }
});
// Ê†πÊçÆÈ°µÈù¢‰∫ã‰ª∂Ë∞ÉÊï¥Èü≥‰πê
let isPlayingSpecial = false;

// Êñ∞Â¢û 'PYTHON' Â≠óÊØçÁöÑ LED ÂÉèÁ¥†Ê®°Âºè
const PATTERNS = {
    "0": ["01110","10001","10001","10001","10001","10001","01110"],
    "1": ["00100","01100","00100","00100","00100","00100","01110"],
    "2": ["01110","10001","00001","00110","01000","10000","11111"],
    "3": ["11111","00001","00010","00110","00010","00001","11111"],
    "5": ["11111","10000","11110","00001","00001","10001","01110"],
    "6": ["01110","10000","11110","10001","10001","10001","01110"],
    // PYTHON ÁöÑÂ≠óÊØçÂÉèÁ¥†ÂÆö‰πâÔºà5x7 Ê†ºÂºèÔºâ
    "P": ["11110","10001","10001","11110","10000","10000","10000"],
    "Y": ["10001","01010","00100","00100","00100","00100","00100"],
    "T": ["11111","00100","00100","00100","00100","00100","00100"],
    "H": ["10001","10001","10001","11111","10001","10001","10001"],
    "O": ["01110","10001","10001","10001","10001","10001","01110"],
    "N": ["10001","11001","10101","10101","10101","10011","10001"]
};

function renderLED(digits) {
    const container = document.getElementById('led-display');
    container.innerHTML = "";
    Array.from(digits).forEach((num, charIndex) => {
        const charBox = document.createElement('div');
        charBox.className = 'char-box';
        charBox.style.animationDelay = (charIndex * 0.1) + "s";
        const dots = PATTERNS[num] || ["00000","00000","00000","00000","00000","00000","00000"];
        for (let r = 0; r < 7; r++) {
            const ledRow = document.createElement('div');
            ledRow.style.display = "flex";
            ledRow.style.gap = "4px";
            for (let c = 0; c < 5; c++) {
                const led = document.createElement('div');
                led.className = 'led';
                if (dots[r][c] === "1") {
                    led.classList.add('on');
                    led.style.animationDelay = (charIndex * 0.1 + r * 0.05) + "s";
                }
                ledRow.appendChild(led);
            }
            charBox.appendChild(ledRow);
        }
        container.appendChild(charBox);
    });
}

function createPythonDisplay() {
    const container = document.getElementById('python-display');
    container.innerHTML = "";
    const pythonWord = "PYTHON";
    
    Array.from(pythonWord).forEach((char, charIndex) => {
        const charBox = document.createElement('div');
        charBox.className = 'python-char-box';
        const pattern = PATTERNS[char];
        
        for (let r = 0; r < 7; r++) {
            const ledRow = document.createElement('div');
            ledRow.style.display = "flex";
            ledRow.style.gap = "4px";
            for (let c = 0; c < 5; c++) {
                const led = document.createElement('div');
                led.className = 'python-led';
                if (pattern && pattern[r][c] === "1") {
                    led.classList.add('on');
                    led.style.animationDelay = (charIndex * 0.1 + r * 0.05) + "s";
                }
                ledRow.appendChild(led);
            }
            charBox.appendChild(ledRow);
        }
        container.appendChild(charBox);
    });
}

// ‰øÆÊîπÁÉüËä±Á≤íÂ≠êÂáΩÊï∞ÔºåÊ∑ªÂä†ÁõÆÊ†á‰ΩçÁΩÆÂèÇÊï∞
function createPixelFirework(startX, startY, particleCount = 25, isBig = false, targetPositions = []) {
    const colors = ['#ff4d4d', '#4dff4d', '#4dffff', '#ff4dff', '#ffff4d', '#ffffff'];
    
    for (let i = 0; i < particleCount; i++) {
        const p = document.createElement('div');
        p.className = 'led-particle';
        const color = colors[Math.floor(Math.random() * colors.length)];
        p.style.background = color;
        p.style.boxShadow = `0 0 8px ${color}`;
        document.body.appendChild(p);

        // ÂàùÂßã‰ΩçÁΩÆÂíåÈÄüÂ∫¶
        let posX = startX, posY = startY;
        let vx, vy;
        let gravity = 0.08;
        let opacity = 1;
        
        // Â¶ÇÊûúÊúâÁõÆÊ†á‰ΩçÁΩÆÔºå‰∏∫ÊØè‰∏™Á≤íÂ≠êÂàÜÈÖç‰∏Ä‰∏™
        let target = null;
        if (targetPositions.length > 0) {
            // ‰∏∫ÊØè‰∏™Á≤íÂ≠êÂàÜÈÖç‰∏Ä‰∏™ÁâπÂÆöÁöÑÁõÆÊ†á‰ΩçÁΩÆ
            target = targetPositions[i % targetPositions.length];
            
            // ÂàùÂßãÈÄüÂ∫¶ÔºöÂÖàÂêëÂ§ñÊï£ÂºÄ
            const angle = Math.random() * Math.PI * 2;
            const spreadSpeed = isBig ? 8 : 4;
            vx = Math.cos(angle) * spreadSpeed;
            vy = Math.sin(angle) * spreadSpeed;
        } else {
            // Ê≠£Â∏∏ÁÉüËä±Ë°å‰∏∫
            const angle = Math.random() * Math.PI * 2;
            const velocity = isBig ? (Math.random() * 10 + 4) : (Math.random() * 5 + 2);
            vx = Math.cos(angle) * velocity;
            vy = Math.sin(angle) * velocity;
        }

        const move = () => {
            if (target) {
                // ËÆ°ÁÆóÂà∞ÁõÆÊ†áÁöÑË∑ùÁ¶ª
                const dx = target.x - posX;
                const dy = target.y - posY;
                const distance = Math.sqrt(dx * dx + dy * dy);
                
                // Á≤íÂ≠êËøêÂä®ÈÄªËæëÔºöÂÖàÊï£ÂºÄÔºåÁÑ∂ÂêéÂêëÁõÆÊ†áÊ±áËÅö
                if (distance > 10) {
                    // ÈÄêÊ∏êËΩ¨ÂêëÁõÆÊ†á
                    const targetSpeed = Math.min(distance / 15, 6);
                    const targetAngle = Math.atan2(dy, dx);
                    
                    // Ê∑∑ÂêàÂΩìÂâçÈÄüÂ∫¶ÂíåÁõÆÊ†áÊñπÂêë
                    const currentSpeed = Math.sqrt(vx * vx + vy * vy);
                    const currentAngle = Math.atan2(vy, vx);
                    
                    // ÈÄêÊ∏êËΩ¨ÂêëÁõÆÊ†áËßíÂ∫¶
                    const blend = 0.1; // ËΩ¨ÂêëÂº∫Â∫¶
                    const newAngle = currentAngle * (1 - blend) + targetAngle * blend;
                    
                    vx = Math.cos(newAngle) * targetSpeed;
                    vy = Math.sin(newAngle) * targetSpeed;
                    gravity = 0;
                } else {
                    // Êé•ËøëÁõÆÊ†áÔºåÂáèÈÄüÂπ∂‰øùÊåÅ
                    vx *= 0.9;
                    vy *= 0.9;
                    posX = target.x;
                    posY = target.y;
                    opacity = 0.9; // ‰øùÊåÅÂèØËßÅ
                }
            } else {
                // Ê≠£Â∏∏ÁÉüËä±Ë°å‰∏∫
                posX += vx;
                posY += vy;
                vy += gravity;
                vx *= 0.98;
                opacity -= 0.015;
            }

            p.style.left = posX + 'px';
            p.style.top = posY + 'px';
            p.style.opacity = opacity;
            
            if (opacity > 0.01) {
                requestAnimationFrame(move);
            } else {
                p.remove();
            }
        };
        
        requestAnimationFrame(move);
    }
}

function randomBackgroundFireworks() {
    const x = Math.random() * window.innerWidth;
    const y = Math.random() * (window.innerHeight * 0.6);
    createPixelFirework(x, y, 15, false); // ÂáèÂ∞ëÁ≤íÂ≠êÊï∞Èáè
}

// ÊûÑÂª∫ PYTHON Â≠óÊØçÁöÑÁõÆÊ†á‰ΩçÁΩÆÊï∞ÁªÑ
function generatePythonTargetPositions() {
    const pythonWord = "PYTHON";
    const letterSpacing = 15;
    const dotSize = 12 + 4;
    
    const clockBox = document.querySelector('.clock-box');
    const boxRect = clockBox.getBoundingClientRect();
    const boxCenterX = boxRect.left + boxRect.width / 2;
    const boxCenterY = boxRect.top + boxRect.height / 2;
    
    const pythonWidth = (5 * 6 * dotSize) + (5 * letterSpacing);
    const startX = boxCenterX - pythonWidth / 2;
    const startY = boxCenterY - (7 * dotSize) / 2;
    
    const targetPositions = [];
    
    let currentX = startX;
    for (let charIndex = 0; charIndex < pythonWord.length; charIndex++) {
        const char = pythonWord[charIndex];
        const pattern = PATTERNS[char];
        if (!pattern) continue;
        
        for (let r = 0; r < 7; r++) {
            for (let c = 0; c < 5; c++) {
                if (pattern[r][c] === "1") {
                    targetPositions.push({
                        x: currentX + c * dotSize,
                        y: startY + r * dotSize
                    });
                }
            }
        }
        
        currentX += 5 * dotSize + letterSpacing;
    }
    
    return targetPositions;
}

// --- ‰∏ªÁ®ãÂ∫èÈÄªËæë ---
renderLED("20251231");
const bgFireworkTimer = setInterval(randomBackgroundFireworks, 1200);

let timeLeft = 9;
const timerEl = document.getElementById('timer');
const titleEl = document.getElementById('main-title');
const greetingEl = document.getElementById('greeting-msg');
const pythonDisplay = document.getElementById('python-display');

const countdown = setInterval(() => {
    timeLeft--;
    if (timeLeft > 0) {
        timerEl.innerText = "00:0" + timeLeft;
        if(timeLeft <= 3) {
            const sideX = (timeLeft % 2 === 0) ? window.innerWidth * 0.2 : window.innerWidth * 0.8;
            createPixelFirework(sideX, window.innerHeight * 0.4, 15, false);
            
            // ÂÄíËÆ°Êó∂ÊúÄÂêé3ÁßíÔºåÂ¶ÇÊûúÈü≥‰πêÂú®Êí≠ÊîæÔºåÂ¢ûÂä†Èü≥Èáè
            if (!bgMusic.paused) {
                bgMusic.volume = Math.min(0.7, bgMusic.volume + 0.1);
            }
        }
    } else {
        clearInterval(countdown);
        clearInterval(bgFireworkTimer);
        
        // 20260101‰øùÊåÅ‰∏çÂèò
        renderLED("20260101");
        titleEl.innerText = "üéä ÊúüÂæÖ2026(^-^) üéä";
        greetingEl.innerText = "Êñ∞ÁöÑ‰∏ÄÂπ¥ÔºåÂ§ßÂêâÂ§ßÂà©ÔºåÂπ≥ÂÆâÂñú‰πêÔºÅ";
        
        // ÊòæÁ§∫"Ë∑®Âπ¥Âø´‰πê"
        timerEl.innerText = "Ë∑®Âπ¥Âø´‰πêÔºÅ";
        timerEl.style.color = "#ffdd44";
        
        // Ë∑®Âπ¥Êó∂ÂàªÔºåË∞ÉÊï¥Èü≥‰πêÊïàÊûú
        if (!bgMusic.paused) {
            // Áü≠ÊöÇÊèêÈ´òÈü≥ÈáèÂ∫ÜÁ•ù
            const originalVolume = bgMusic.volume;
            bgMusic.volume = Math.min(0.9, originalVolume + 0.2);
            setTimeout(() => {
                bgMusic.volume = originalVolume;
            }, 2000);
        }
        
        // Â¢ûÂä†ËÉåÊôØÁÉüËä±ÊåÅÁª≠ÁªΩÊîæ
        let backgroundFireworksAfter = setInterval(() => {
            const x = Math.random() * window.innerWidth;
            const y = Math.random() * (window.innerHeight * 0.4);
            createPixelFirework(x, y, 12, false);
        }, 1200);
        
        // ÁîüÊàêPYTHONÁõÆÊ†á‰ΩçÁΩÆ
        const pythonTargetPositions = generatePythonTargetPositions();
        
        // ÂàõÂª∫PYTHONÊòæÁ§∫Ôºà‰ΩÜÂÖàÈöêËóèÔºâ
        createPythonDisplay();
        pythonDisplay.style.opacity = "0";
        
        // ÂºÄÂßãÁÉüËä±Ê±áËÅöÊïàÊûú
        let bursts = 0;
        const finalCelebration = setInterval(() => {
            const fireworkCount = Math.floor(Math.random() * 2) + 1;
            
            for(let f = 0; f < fireworkCount; f++) {
                const rx = (Math.random() * 0.8 + 0.1) * window.innerWidth;
                const ry = (Math.random() * 0.3 + 0.1) * window.innerHeight;
                
                const particleCount = Math.min(40, pythonTargetPositions.length * 0.3);
                createPixelFirework(rx, ry, particleCount, true, pythonTargetPositions);
            }
            
            bursts++;
            if(bursts >= 8) {
                clearInterval(finalCelebration);
                
                // Á≠âÂæÖÁÉüËä±Ê±áËÅöÂÆåÊàêÂêéÔºåÊòæÁ§∫PYTHONÂπ∂ÈöêËóè"Ë∑®Âπ¥Âø´‰πê"
                setTimeout(() => {
                    timerEl.style.opacity = "0";
                    
                    setTimeout(() => {
                        pythonDisplay.style.opacity = "1";
                        
                        // PYTHONÊòæÁ§∫Êó∂Ë∞ÉÊï¥Èü≥‰πê
                        if (!bgMusic.paused) {
                            musicInfo.textContent = 'Python Time! üêç';
                        }
                        
                        clearInterval(backgroundFireworksAfter);
                        
                        for(let i = 0; i < 5; i++) {
                            setTimeout(() => {
                                const x = (Math.random() * 0.8 + 0.1) * window.innerWidth;
                                const y = (Math.random() * 0.5 + 0.2) * window.innerHeight;
                                createPixelFirework(x, y, 20, false);
                            }, i * 300);
                        }
                    }, 800);
                }, 800);
            }
        }, 600);
    }
}, 1000);
</script>
</body>
</html>